---
title: "Автоматическая система. Строительство."
sidebar: ponics_sidebar
---

**funycat** 22-12-2009

Итак, наконец собрались все компоненты и я начал делать узлы и потихоньку собирать систему. Окончательная схема выглядит так:

[![](http://s3.postimage.org/Bhu49.jpg)](http://s3.postimage.org/Bhu49.jpg){:target="_blank"}

общий рабочий обьем 80 (28 раств+52 система) л, максимальный - 130л, несменный - 3-4 л

принцип работы:

- в системных баках ВСЕГДА есть раствор

- при подготовке нового раствора система отрезается от растворного бака, и только когда Ph и температура выровняется, опять подключается и новый смешивается со старым

- удобрения дозируются в соответствиис выставленными пропорциями, с контролем ЕС 

- при полной смене раствора, сначала готовится новый (в рабочем обьеме на все системные баки), только потом сливается старый

- уровень раствора в системе колеблется от рабочего и ниже, при доливе система всегда пополняется до рабочего уровня

- задается период пополнения: раз в час/день/итп, в зависимости от стадии и апетитов растенй

- залитая вода может подогреваться нагревателем, или остаиваться сутки/двое/... с естественным нагревом

Вот из этого склада предстоит собрать надеюсь :) рабочую систему:

[![](http://s3.postimage.org/BhJ20.jpg)](http://s3.postimage.org/BhJ20.jpg){:target="_blank"}

[![](http://s3.postimage.org/BhVvJ.jpg)](http://s3.postimage.org/BhVvJ.jpg){:target="_blank"}

Емкость для смешивания расстворов, в ней же два датчика EC и Ph

[![](http://s3.postimage.org/Biyq0.jpg)](http://s3.postimage.org/Biyq0.jpg){:target="_blank"}

Датчик уровня, вышел в 230 руб (100 - автодатчик омывателя от 9ки, 100 - кронштейн, 30 присоски)

[![](http://s3.postimage.org/Bj6l0.jpg)](http://s3.postimage.org/Bj6l0.jpg){:target="_blank"}

Консоль для помп:

[![](http://s3.postimage.org/Bjbki.jpg)](http://s3.postimage.org/Bjbki.jpg){:target="_blank"}

После препарирования СМС122 и EC310 выяснилось, что для преврашения EC310 в полноценный релейный EC контроллер нужно добавить резистор, транзистор, диод и реле, все на родные места. Также есть мысль сделать аналоговые выходы 0-10В, уже нашел точки 0,1mc=0,1В и 0,1Ph=0,2В. Осталось поставить операционники для усиления и приведения к нужному уровню. Если получится, то за: 6,5 тыр (с доставкой) + 150 руб на доработки имеем полноценные контроллеры EC/Ph. Что неприятно удивило, что в СМС122 очень долго устаканивется Ph уровень.. изменение 4,2 - &gt; 7,3 последние три десятые он думал аж 15 минут!! 

препарированный СМС122:

[![](http://s3.postimage.org/Bkdb0.jpg)](http://s3.postimage.org/Bkdb0.jpg){:target="_blank"}

буду рад дельным замечаниям (без флуда ;) ), и спасибо огромное alexxx - без его примера и советов я бы не взялся :)


**koval.sergei** 22-12-2009

Отдельную табличку сделайте итого скока за всё потратили, а так нам всем будет интересно. :-[


**Mole_Garden** 22-12-2009

Шикарное начало! так держать.

Вопрос 
> После препарирования СМС122 и EC310 выяснилось, что для преврашения EC310 в полноценный релейный EC контроллер нужно добавить резистор, транзистор, диод и реле, все на родные места. Также есть мысль сделать аналоговые выходы 0-10В, уже нашел точки 0,1mc=0,1В и 0,1Ph=0,2В. 

 У тебя есть схема как это делать или ты просто знаешь как это делать?

Если можно чуть подробней, что как работает, к примеру та же консоль. 

Спасибо!


**funycat** 22-12-2009

планирую уложиться в 50-55 тыр. Самые дорогие элементы: дозирующие помпы 5 шт (15,5), мозги ОВЕН (14), контроллеры(6,5), УФ стерилиз-р и помпы (4,5), клапана, баки, фильтры (10), прочее набежит обязательно. Но, это только то, что пойдет в дело... есть еще куча купленного и не подошедшего или похеренного...


**funycat** 22-12-2009

> Шикарное начало! так держать.
> 
> Вопрос 
> > После препарирования СМС122 и EC310 выяснилось, что для преврашения EC310 в полноценный релейный EC контроллер нужно добавить резистор, транзистор, диод и реле, все на родные места. Также есть мысль сделать аналоговые выходы 0-10В, уже нашел точки 0,1mc=0,1В и 0,1Ph=0,2В. 
> 
>  У тебя есть схема как это делать или ты просто знаешь как это делать?
> 
> Если можно чуть подробней, что как работает, к примеру та же консоль. 
> 
> Спасибо!

Консолью я назвал кронштейн для установки помп :D, помпы перистальтические, дозируют 36мл/мин, на сколько надо, на столько включаешь. 

Две бессонных ночи с вольтметром и разными расстворами (слава богу для ЕС можно было резистором обойтись вместо воды), методом полного тыка были найдены контакты на плате, которые не влияют не показания, но на которых изменяется вольтаж в завис от EC/Ph.

Далее яндекс - снять, усилить сигнал и сместить его (в приборах он меняется допустим от 2,9-6В), можно с помощью операционника. Схемы в сети. Надеюсь магазин радиодетали и еще пару-тройку ночей эксперементов помогут решить вопрос практически )))

имхо самое дельное описание работы ОУ : [http://window.edu.ru/window_catalog/redir?id=53976&amp;file=stup330.pdf](http://window.edu.ru/window_catalog/redir?id=53976&amp;file=stup330.pdf){:target="_blank"}


**Mole_Garden** 22-12-2009

Будем ждать результатов и более дельного описания! ;)


**valery** 22-12-2009

Очень достойная установка у Алекса. Будем надеяться, что и Ваш, несколько упрощенный вариант окажется не менее функциональным.

Тем не менее присутствие отдельных элементов не кажется таким уж очевидным.

Например, для чего в Вашей установке присутствует УФ-стерилизатор, тем более сразу за основым баком для смешивания ?


**funycat** 23-12-2009

> Например, для чего в Вашей установке присутствует УФ-стерилизатор, тем более сразу за основым баком для смешивания ?

Как зачем? чтобы перекись не лить ))) он врезан в патрубок перемешивания раствора - работает тогда, когда работает соотв помпа. А что, есть разница куда его ставить? 


**Alex123** 23-12-2009

Правильно ли я понимаю принцип работы перистальтической помпы - электродвигатель с понижающим редуктором, на валу типа ролик, который катком прокатывается по силиконовой трубке, выдавливая из нее жидкость ?


**koval.sergei** 23-12-2009

funycat

Можно пояснить, поподробнее про питание и снятие показаний.



**funycat** 23-12-2009

> Правильно ли я понимаю принцип работы перистальтической помпы - электродвигатель с понижающим редуктором, на валу типа ролик, который катком прокатывается по силиконовой трубке, выдавливая из нее жидкость ?

абсолютно! трубка силикон или сантопрен, 4 ролика-катка.

2 koval.sergei - питание, клемник - родные, клемник - выход реле на дозатор, черный просто земля, коричневый - 0,1 Ph = 0,2В

Препарированный EC310. Видно место для реле, доп элементов, собран на обычных элементах, а 122 на планарках. 

![](http://savepic.org/90105m.jpg)


**funycat** 23-12-2009

Аварии будут контролироваться ПЛК через датчики + система оповещения GSM и аварийное отключение электричества при высокой опасности. 

- средняя опасность: отказ помп, контроллеров, клапанов, освещения 

- высокая опасность: затопление, перегрев, сильный перегрев (пожар)

Фотореле, реле уровня воды (затопление) + проверка + датчики:

![](http://savepic.org/111609m.jpg)

![](http://savepic.org/100345m.jpg)

![](http://savepic.org/94201m.jpg)


**valery** 24-12-2009

Разница куда ставить УФ-стерилизатор, конечно же есть. Если он вообще необходим.

Меня смущает не техническая сторона. Во-первых - не понимаю в технике, во-вторых - и технические решения Алекса на высоте, и надеюсь - у Вас тоже все получится замечательно.

Меня смущает функциональность системы, некоторые решения представляются ненужными, а иной раз и впрямую бессмысленно-вредными, в том числе и удорожающими систему.

Алекс на этот вопрос однажды отвечал, вполне убедительно, но, как бы это сказать - "не совсем".

В Вашей схеме вначале темы под номером 16 указан "коллектор для капельного полива". Надо понимать, что собираетесь использовать капельный полив ?

Для чего тогда УФ-стерилизатор ? И зачем собирались лить перекись водорода ?


**funycat** 24-12-2009

> Меня смущает функциональность системы, некоторые решения представляются ненужными, а иной раз и впрямую бессмысленно-вредными, в том числе и удорожающими систему.
> 
> ...
> 
> Для чего тогда УФ-стерилизатор ? И зачем собирались лить перекись водорода ?

Это может быть и реверсивная капля, и ДВЦ и переодика. Будет - вначале реверсивная капля, потом ДВЦ. УФ или перекись только для того, чтобы растворы не цвели. Естественно это опциональный элемент, впрямую на работу системы не влияет. Каждый сам решает нужно или нет. При цене 1,5 т.р. я решил что нужно.

Скажите, какие решения представляются ненужными, а иной раз и впрямую бессмысленно-вредными?


**vlad72** 29-12-2009

...всем привет! можно подробнее о системе GSM оповещения,...не раскрыто участие "мастер-кит"?...


**vlad72** 29-12-2009

...блин,извини,векдь за такую работу тебе не только респект,но и уважение...

,,,ПиСи.большое спасибо...


**funycat** 01-01-2010

> ...всем привет! можно подробнее о системе GSM оповещения,...не раскрыто участие "мастер-кит"?...тем более трудно соориентироваться в переделке
> 
> контроллера,если там оставались "свободные гнезда",то это как правило 
> 
> приводит нас к их изучению на предмет измерений относительно их...тем более что-бы реле на силовой участок срабатывало-бы нужно "подвести" его
> 
> к этому,значит на каком-то участке схемы должны быть места где обычный вольт(ампер)метр мог их прочувствовать???...зачем тогда ОПЕРАЦИОННИК???...

ВСЕХ С НОВЫМ ГОДОМ!!! 

GSM оповещение - через давно валявшийся без дела (так не приспособил для дачи) CCU6225 [www.radsel.ru](http://www.radsel.ru){:target="_blank"} 

есть полно аналогов дешевле и дороже. Мастеркиты - аварийные датчики, см выше.

Влад, я не до конца понимаю Ваше изложение ;) пишите более по - русски )

Вот фото с установленными деталями. Релейный контроллер работает как часы. 

[![](http://s4.postimage.org/MhjNJ.jpg)](http://s4.postimage.org/MhjNJ.jpg){:target="_blank"}

Операционники нужны для усиления и согласования уровней. Пока чтото не получается.


**funycat** 02-01-2010

Решил я зачемто знать обьем заливаемой воды... на импульсный расходомер яндекс выдал тыщи ссылок, но: все они были 1-10 литров на импульс, дорогие, и в магазинах нашей деревне о таких слыхом не слыхивали...

Ок, простой счетчик за 400 рэ, старая мыша и сторублевый мастеркит посредством некоторых манипуляций превращаются... в импульсный расходомер с выходом открытый коллектор, 8 имп/литр! не обошлось конечно без жертв :&#39;( мыша пала смертью храбрых...:D 

[![](http://s3.postimage.org/13hXV0.jpg)](http://s3.postimage.org/13hXV0.jpg){:target="_blank"}

[![](http://s3.postimage.org/13i6TA.jpg)](http://s3.postimage.org/13i6TA.jpg){:target="_blank"}

Спасибо Alex123 за совет ))


**vlad72** 06-01-2010

Всех с новым годом!

...да уж перечитал сам не понял чЁ хотел сказать,вообщем попытаюсь

теперь по русски; я собственно хотел теперь узнать в описании на

РН-метр (ну или в самом девайсе...) имеется название МС ?

...если не трудно скинь как она обзывается,а то по фотке не могу рассмотреть,хочу почитать ее описание...может и нет нужды согласовывать 

(поднимать) сигнал?может там(..в девайсе) уже "заложен" понятный для восприятия уровень...

...я почему так интересуюсь,потому как собираюсь приобрести;

[![](http://s4.postimage.org/ZOKKr.jpg)](http://s4.postimage.org/ZOKKr.jpg){:target="_blank"}

ссылочка; на РУ [http://www.ecounit.ru/goods_158.html](http://www.ecounit.ru/goods_158.html){:target="_blank"}

а это с украины,

[http://ecounit.com.ua/goods_3_158.html](http://ecounit.com.ua/goods_3_158.html){:target="_blank"}

что странно на хохляцком сайте в описании тех.хар. имеется упоминание о "токовых выходах",а на нашем нет... (ошибочка наверное,но я надеюсь,что в нем заложена такая возможность, хотя бы в виде "свободных гнезд"),

Вот пройдут праздники закажу прибор,а пока очень интересно как ты доработаешь свой,потому как идти мне тем же путем...

..да хотелось бы подробнее; какие именно доз.помпы(перельстатику) используешь,в каком магазе (если в инет) брал. ОВЕН - 150? не разгляжу 

на фото,вообще дело до ОВНа дошло? я имею ввиду с КОДЕСИС разобрался? ну вообще конечно много вопросов,очень интересная тема...


**funycat** 06-01-2010

контроллеры Milwaukee EC310 и SMS122. в соседней длинной ветке - где брал. с програмированием овнов разбираюсь. на все не хватает времени :(


**vlad72** 02-02-2010

...где-же ты,где??? :&#039;(ушел весь в овен наверное :-\,ну хоть про электромеханику расскажи :-X,как дела вообще :-[...

...да кстати со стандартными примерами написанных на разных языках("светофор") не заморачивайся,много времени потратишь,хотя тебе видней ;)... 

..мне понравился(и ближе по восприятию) на саите КодЕсис с визуалом,про оператора :)...

Ну я так понимаю придется приобретать для визуала ( НМИ) лицензию &gt;:(? У "ПРОЛОГА" или где? :o

...насколько я понял пока "ОВЕН" работает только по НМИ- :(??? можа я чЁ не так понимаю?,,, ??? 


**alexxx** 02-02-2010

HMI - это чтобы визуализация отображалась в полноэкранном режиме. Можно и без этого обойтись, но если очень хочется, то есть одна хитрость. :)

Нужно перевести часы на пару лет вперед, потом запустить 3S Licensing manager, и там взять срочную лицензию на 14 дней. Ну, а потом часы назад перевести.

Я себе на 10 лет сделал, всё отлично. 


**Alex123** 03-02-2010

> ...где-же ты,где??? :&#039;(ушел весь в овен наверное :-\,ну хоть про электромеханику расскажи :-X,как дела вообще :-[...
> 
> .

Да, что-то тема автоматизации однако совсем плохая стала. Никто ничего не пишет...


**vlad72** 03-02-2010

Алекс - 8),это конечно золотой совет ;),АгРаменное спасибо,будем попробывать,как-бы на том сайте не узнали про твои хакерские проделки :-X.Думаю автору данной темы вообще своевременно! Завидую Вам обоим :&#39;(...

..кстати,если не ошибаюсь в "экоинструменте" появился промышленный электрод РН(HI 1001 [http://www.ecoinstrument.ru/product.asp?id=218](http://www.ecoinstrument.ru/product.asp?id=218){:target="_blank"} )

- ,используемый в твоей установке,жаль нет ЕС и вообще трансмиттера...


**alexxx** 03-02-2010

> Да, что-то тема автоматизации однако совсем плохая стала. Никто ничего не пишет...

Вот вроде у меня заказ намечается на растворный узел, производительностью 1000 литров раствора в час. Правда, система будет нереверсивная, попроще уже созданного мною узла... 

Если всё срастется - с меня репортаж. :)


**Mole_Garden** 04-02-2010

> Вот вроде у меня заказ намечается на растворный узел, производительностью 1000 литров раствора в час. Правда, система будет нереверсивная, попроще уже созданного мною узла... 
> 
> Если всё срастется - с меня репортаж. :)

Ого, не хилые объемы! А репортаж это было бы круто! Ждем! 8)


**vlad72** 07-02-2010

alexxx! если есть время ответь пожалуйста,а как еще можно реализовать визуализацию.Ты писал;-"HMI - это чтобы визуализация отображалась в полноэкранном режиме. Можно и без этого обойтись,..." :(---ведь ВЕБ-визуал на овене не предусмотрен?...

...а вообще у меня что-то не получается ??? попробую по твоей схеме реализовать 14 дневную лицензию,а что делать что-бы "связать" проект с визуалом никак не разберусь,

как-бы это по-русски :-[ не понимаю как НМИ найдет мой проект? 

...вообщем не удобно они с демо версией придумали,тока она вылазиет и что бы потестить, поиграться на экране со своим пректом придется брать ("лиссинг") срочную версию(правильно понимаю? :-\), затем встает вопрос,а как собственно визуал и проект найдут друг друга ???

,... 

ПиС. Гуру-alexxx,подскажи чайникам(надеюсь идеей ОВЕНа прониклись многие) пожалуйста, step by step-так сказать,а то в прилагаемой документации именно по этой теме совсем мало чего выудить можно...

...да прикольная игрушка,наконец-то руки дошли... 


**alexxx** 07-02-2010

Если честно, я сам пока с WEB-сервером не разобрался. У меня дистанционное управление организованно с помощью удаленного рабочего стола, то есть я соединяюсь с компом, который подключен к ПЛК. 

Чтобы запускать в HMI свою визуализацию, нужно указать файл проекта, который надо запускать, например

CoDeSysHMI.exe projekt1.pro 

А можно просто в свойствах ярлыка демо-поекта изменить имя файла.


**vlad72** 09-02-2010

alexxx- 8),"А можно просто в свойствах ярлыка демо-поекта изменить имя файла." - это 

получилось, но это как-бы обходной путь,а вот - "Чтобы запускать в HMI свою визуализацию, нужно указать файл проекта, который надо запускать, например CoDeSysHMI.exe projekt1.pro" пока не получается...где указать этот файл проекта и как это выглядит вАще...просто то что для тебя очевидно,для нас грешных сложно,хотя мохет я тороплюсь... ;)....

ПиСи.чЁ то автора темы не видать ???

ПиСи2. "1) Используя встроенную в CoDeSys визуализацию, полностью выполняем разработку. Покупать пока ничего не надо. Ставим CoDeSys HMI из бесплатного дистрибутива, на машину где будет работать оператор. Все окончательно проверяем и отлаживаем, убеждаемся, что все хорошо и HMI нас устраивает. 

2) Посылаем заявку на приобретение HMI в свободной форме, с указанием реквизитов компании, в адрес 3S или любого ближайшего дистрибьютора. (Цена у всех абсолютно одинакова) Оплачиваем счет. Данные о вашей компании и количестве имеющихся лицензий заносятся во внутреннюю базу данных 3S. 

3) На операторской машине запускаем 3S Licensing Manager. Нажимаем кнопку Add Licence и следуем инструкциям (выбираем CoDeSys HMI в списке, вводим название компании и др.). На последнем шаге есть 3 варианта: 1) Запросить лицензию в online автоматически, если машина связана с И-нет. Либо записать инф-ю в файл, который нужно будет передать в 3S (мыло, факс и др). 2) Либо по телефону. 3) Либо можно активировать срочную лицензию. Она активируется моментально и действует 14 дней, в теч. которых нужно получить нормальную. Для варианта 1, от 3S приходит мыло с лицензионным файлом. Он активируется кнопкой InstallLicense. 

Все. Почтой высылается счет-фактура, CD и стикер - лицензионная марка, которая является документальным подтверждением наличия лицензии. При желании, ее можно наклеить на компьютер, дабы всем было видно, что все ПО лицензионное. Активировать лицензию можно сразу, не дожидаясь почтовой доставки. Лицензии бессрочные. Если вдруг компьютер сломается и будет заменен, то всегда можно моментально активировать срочную лицензию."

...вот чЁ автор имел ввиду под - "Ставим CoDeSys HMI из бесплатного дистрибутива, на машину где будет работать оператор. Все окончательно проверяем и отлаживаем, убеждаемся, что все хорошо и HMI нас устраивает." не совсем понятно...это 14 дневный срочняк,который?

что-ли...

...алекс,дружище просвяти,подскажи подробнее.Понимаю что занят,но на форуме ОВНА вообще бедно на эту тему,а цитаты я взял с форума "ПРОЛОГА"...


**alexxx** 10-02-2010

Щелкаешь правой кнопкой мыши по ярлыку CoDeSys HMI - RoboDemo.pro, выбираешь Свойства. В появившемся окошке в графе Объект указан путь с именем файла. Меняешь имя на свой файл, стираешь simulation, и все работает.


**vlad72** 10-02-2010

alexxx- 8) видимо ты вот это имел ввиду; - "а что мешает подставить путь к своему проекту?

"C:\Program Files\3S Software\CoDeSys V2.3\CoDeSysHMI\CoDeSysHMI.exe" /simulation "C:\твой путь\имя проекта.pro" /visu имя визуализации /visudownload "

-----------------------------------------------------------------------

- " к слову 

если нужна визуализация проекта, запущенного на ПЛК, то вместо /simulation надо ставить /target "

-----------------------------------------------------------------------

alexxx, с этим как раз понятно,должен быть еще вариант запуска, не

с ярлыка я имею ввиду.Вот что писали на эту тему на форуме ОВЕН -

"все работает. с ярлыка.

из батника пишет ошибки." :(

...навеное этот батник меня и интересует :-\

ПиСи. прошерстил на форуме этот раздел ничего не нашел ??? (про этот батник,батник это сленг что-ли :-[ )

Заранее благодарен :)



**alexxx** 10-02-2010

Это файл с расширением .bat. Пишется в обычном текстовом редакторе (блокноте) тоже самое, что и в свойствах ярлыка.

Я вот тока не пойму, зачем тебя в эти дебри понесло? ???


**vlad72** 10-02-2010

...засосало,блин :-\...Да уж надА остановиться,пока :(


**Alex123** 13-02-2010

> Вот вроде у меня заказ намечается на растворный узел, производительностью 1000 литров раствора в час. Правда, система будет нереверсивная, попроще уже созданного мною узла... 
> 
> Если всё срастется - с меня репортаж. :)

Вопросик тут созрел по перистальтической помпе. Как она устанавливается - ниже уровня засасываемой жидкости, выше или пофик как ?

Я так рассуждаю чиста теоретически - если ниже, то самотека не случается потому, что ролики пережимают трубку ? А если выше, то не получается ли так, что жидкость стекает назад в емкость ?

Я чо волнуюсь-то - если в трубке нет жидкости, то как бы погрешность в объеме перекачанной жидкости получается...


**alexxx** 13-02-2010

Alex123, как распологать насос не важно. Ролик надежно пережимает трубку, и ни туда ни сюда ничего не течет.


**vlad72** 20-02-2010

alexxx, а какие трубки используются после трубки перильстатической помпы?



**alexxx** 20-02-2010

Любые. У меня силиконовые.


**funycat** 29-03-2010

Пока в длительной рабочей командировке... надеюсь что скоро вернусь и продолжу строительство, как и что буду информировать ))) 


**Mole_Garden** 29-03-2010

> Пока в длительной рабочей командировке... надеюсь что скоро вернусь и продолжу строительство, как и что буду информировать ))) 

 8) ждем, как из печки пирога. 


**korkunov** 22-08-2010

> планирую уложиться в 50-55 тыр. Самые дорогие элементы: дозирующие помпы 5 шт (15,5), мозги ОВЕН (14), контроллеры(6,5), УФ стерилиз-р и помпы (4,5), клапана, баки, фильтры (10), прочее набежит обязательно. Но, это только то, что пойдет в дело... есть еще куча купленного и не подошедшего или похеренного...

Hi.

А что за УФ стерилизатор такой недорогой?

Моделька и где брал.

Спасибо и удачи!


